#!/usr/bin/make -f

# Uncomment this to turn on verbose mode .
export DH_VERBOSE =1
_debroot=${PWD}/debian/xcclient
xcatbaseinstdir=/opt/xcat

build :

clean :
	dh_testdir
	dh_testroot
	dh_clean

install : build
	pwd

# Build architecture - independent files here .
binary-indep : build install

# Build architecture - dependent files here .
binary-arch :
	pwd
	dh_testdir
	dh_testroot
	dh_installchangelogs
	dh_installdocs
	dh_installexamples
	#dh_install
	install -d ${_debroot}${xcatbaseinstdir}
	install -d ${_debroot}${xcatbaseinstdir}/bin
	install -d ${_debroot}${xcatbaseinstdir}/lib/python/xcclient
	install -d ${_debroot}${xcatbaseinstdir}/lib/python/xcclient/inventory
	install -d ${_debroot}${xcatbaseinstdir}/man/man1

	install -m755 src/bin/* ${_debroot}${xcatbaseinstdir}/bin
	install -m644 src/lib/xcclient/*.py install -d ${_debroot}${xcatbaseinstdir}/lib/python/xcclient
	install -m644 src/lib/xcclient/inventory/*.py ${_debroot}${xcatbaseinstdir}/lib/python/xcclient/node

	#generate the manpage
        #TBD
	dh_installman
	dh_link
	dh_strip
	dh_compress
	#dh_fixperms
	dh_installdeb
	#dh_shlibdeps
	dh_gencontrol
	dh_md5sums
	dh_builddeb

binary : binary-indep binary-arch

.PHONY : build clean binary-indep binary-arch binary install configure

