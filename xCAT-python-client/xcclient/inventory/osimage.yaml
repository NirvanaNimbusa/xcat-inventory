!!python/dict
  osimage:
    imagetype:
    - "${{winimgname=T{winimage.imagename}, objname=V{obj_name}: 'windows' if winimgname == objname else 'linux'}}"
    - "W:T{winimage.imagename}=${{imgtype=V{imagetype}: V{obj_name} if imgtype == 'windows' else None }}"
    basic_attributes:
      distribution: "T{osimage.osvers}"
      arch: "T{osimage.osarch}"
      osdistro: "T{osimage.osdistroname}"
      description: "T{osimage.description}"
    role: "T{osimage.profile}"
    provision_mode: "T{osimage.provmethod}"
    pkglist: "T{linuximage.pkglist}"
    pkgdir: "T{linuximage.pkgdir}"
    otherpkglist: "T{linuximage.otherpkglist}"
    otherpkgdir: "T{linuximage.otherpkgdir}"
    template: "${{imagetype=V{imagetype} :T{winimage.template} if imagetype == 'windows' else T{linuximage.template} if imagetype == 'linux' else None }} "
    osupdatename: "T{osimage.osupdatename}"
    synclists: "T{osimage.synclists}"
    postscripts: "T{osimage.postscripts}"
    postbootscripts: "T{osimage.postbootscripts}"
    boottarget: "T{linuximage.boottarget}"                                 
    addkcmdline: "T{linuximage.addkcmdline}"
    driverupdatesrc: "T{linuximage.driverupdatesrc}"
    partitionfile: "${{imagetype=V{imagetype} :T{linuximage.partitionfile} if imagetype == 'linux' else T{winimage.partitionfile} if imagetype == 'windows' else None}}"
    exlist: "T{linuximage.exlist}"
    netdrivers: "T{linuximage.netdrivers}"
    postinstall: "T{linuximage.postinstall}"
    rootimgdir: "T{linuximage.rootimgdir}"
    kerneldir: "T{linuximage.kerneldir}"
    kernelver: "T{linuximage.kernelver}"
    nodebootif: "T{linuximage.nodebootif}"
    permission: "T{linuximage.permission}"
    rootfstype: "T{osimage.rootfstype}"
    installto: "${{imagetype=V{imagetype} :T{winimage.installto} if imagetype == 'windows' else None }}"
    winpepath: "${{imagetype=V{imagetype} :T{winimage.winpepath}  if imagetype == 'windows' else None }}"
    kernel_dump:
      dump: "${{imagetype=V{imagetype},provmode=V{provision_mode}: T{linuximage.dump} if imagetype == 'linux' and provmode !='install' else None}}"
      crashkernelsize: "${{imagetype=V{imagetype},provmode=V{provision_mode}: T{linuximage.crashkernelsizei} if imagetype == 'linux' and provmode !='install' else None}}"

